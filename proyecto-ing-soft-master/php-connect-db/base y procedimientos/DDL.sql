-- MySQL Script generated by MySQL Workbench
-- Thu Apr  2 23:18:14 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_GENEROS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_GENEROS` (
  `ID_GENERO` INT NOT NULL AUTO_INCREMENT,
  `GENERO` VARCHAR(20) NOT NULL,
  `ABREVIATURA` VARCHAR(1) NOT NULL,
  PRIMARY KEY (`ID_GENERO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_ESTADO_CIVIL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_ESTADO_CIVIL` (
  `ID_ESTADO_CIVIL` INT NOT NULL AUTO_INCREMENT,
  `ESTADO_CIVIL` VARCHAR(20) NOT NULL,
  `ABREV_ESTADO_CIVIL` VARCHAR(1) NOT NULL,
  PRIMARY KEY (`ID_ESTADO_CIVIL`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_PERSONAS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_PERSONAS` (
  `ID_PERSONA` INT NOT NULL AUTO_INCREMENT,
  `DNI` VARCHAR(25) NULL,
  `ID_GENERO` INT NOT NULL,
  `ID_ESTADO_CIVIL` INT NOT NULL,
  `NOMBRE_PERSONA` VARCHAR(60) NOT NULL,
  `APELLIDO_PERSONA` VARCHAR(60) NOT NULL,
  `FECHA_NACIMIENTO` DATE NOT NULL,
  `EDAD` INT NULL,
  `DIRECCION` VARCHAR(150) NOT NULL,
  `TELEFONO` VARCHAR(25) NULL,
  `CELULAR` VARCHAR(25) NULL,
  PRIMARY KEY (`ID_PERSONA`),
  CONSTRAINT `fk_TBL_PERSONAS_TBL_GENERO1`
    FOREIGN KEY (`ID_GENERO`)
    REFERENCES `db-telefonia`.`TBL_GENEROS` (`ID_GENERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_PERSONAS_TBL_ESTADO_CIVIL1`
    FOREIGN KEY (`ID_ESTADO_CIVIL`)
    REFERENCES `db-telefonia`.`TBL_ESTADO_CIVIL` (`ID_ESTADO_CIVIL`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_TBL_PERSONAS_TBL_GENERO1_idx` ON `db-telefonia`.`TBL_PERSONAS` (`ID_GENERO` ASC);

CREATE INDEX `fk_TBL_PERSONAS_TBL_ESTADO_CIVIL1_idx` ON `db-telefonia`.`TBL_PERSONAS` (`ID_ESTADO_CIVIL` ASC);


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_SUCURSALES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_SUCURSALES` (
  `ID_SUCURSAL` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE_SUCURSAL` VARCHAR(45) NOT NULL,
  `DIRECCION_SUCURSAL` VARCHAR(180) NOT NULL,
  `TELEFONO_SUCURSAL` VARCHAR(20) NOT NULL,
  `FAX_SUCURSAL` VARCHAR(45) NULL,
  `CORREO_SUCURSAL` VARCHAR(60) NOT NULL,
  `FECHA_CREACION_SUCURSAL` DATE NOT NULL,
  PRIMARY KEY (`ID_SUCURSAL`))
ENGINE = InnoDB;

ALTER TABLE TBL_PROVEEDOR ADD COLUMN (CORREO VARCHAR(65));
ALTER TABLE TBL_PROVEEDOR ADD COLUMN (TELEFONO VARCHAR(25));


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_ESTATUS_EMPLEADO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_ESTATUS_EMPLEADO` (
  `ID_ESTATUS_EMPLEADO` INT NOT NULL AUTO_INCREMENT,
  `STATUS` VARCHAR(45) NOT NULL,
  `DESCRIPCION_ESTATUS` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`ID_ESTATUS_EMPLEADO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_TITULACIONES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_TITULACIONES` (
  `ID_TITULACION` INT NOT NULL AUTO_INCREMENT,
  `TITULACION` VARCHAR(80) NOT NULL,
  `DESCRIPCION` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`ID_TITULACION`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_CARGO_EMPLEADO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_CARGO_EMPLEADO` (
  `ID_CARGO_EMPLEADO` INT NOT NULL AUTO_INCREMENT,
  `DESCRIPCION_CARGO_EMPLEADO` VARCHAR(180) NULL,
  `REQUISITOS_CARGO_EMPLEADO` VARCHAR(180) NULL,
  PRIMARY KEY (`ID_CARGO_EMPLEADO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_EMPLEADOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_EMPLEADOS` (
  `ID_EMPLEADO` INT NOT NULL,
  `ID_SUCURSAL` INT NOT NULL,
  `ID_ESTATUS_EMPLEADO` INT NOT NULL,
  `ID_TITULACION` INT NOT NULL,
  `ID_CARGO_EMPLEADO` INT NOT NULL,
  `FECHA_CONTRATO` VARCHAR(45) NOT NULL,
  `CORREO_EMPLEADO` VARCHAR(60) NOT NULL,
  `CLAVE_EMPLEADO` VARCHAR(65) NOT NULL,
  `OBSERVACIONES_EMPLEADO` VARCHAR(150) NULL,
  `FOTOGRAFIA_EMPLEADO` VARCHAR(200) NULL,
  PRIMARY KEY (`ID_EMPLEADO`),
  CONSTRAINT `fk_TBL_EMPLEADOS_TBL_SUCURSALES1`
    FOREIGN KEY (`ID_SUCURSAL`)
    REFERENCES `db-telefonia`.`TBL_SUCURSALES` (`ID_SUCURSAL`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_EMPLEADOS_TBL_PERSONAS1`
    FOREIGN KEY (`ID_EMPLEADO`)
    REFERENCES `db-telefonia`.`TBL_PERSONAS` (`ID_PERSONA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_EMPLEADOS_TBL_ESTATUS_EMPLEADO1`
    FOREIGN KEY (`ID_ESTATUS_EMPLEADO`)
    REFERENCES `db-telefonia`.`TBL_ESTATUS_EMPLEADO` (`ID_ESTATUS_EMPLEADO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_EMPLEADOS_TBL_TITULACIONES1`
    FOREIGN KEY (`ID_TITULACION`)
    REFERENCES `db-telefonia`.`TBL_TITULACIONES` (`ID_TITULACION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_EMPLEADOS_TBL_CARGO_EMPLEADO1`
    FOREIGN KEY (`ID_CARGO_EMPLEADO`)
    REFERENCES `db-telefonia`.`TBL_CARGO_EMPLEADO` (`ID_CARGO_EMPLEADO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_TBL_EMPLEADOS_TBL_SUCURSALES1_idx` ON `db-telefonia`.`TBL_EMPLEADOS` (`ID_SUCURSAL` ASC);

CREATE INDEX `fk_TBL_EMPLEADOS_TBL_PERSONAS1_idx` ON `db-telefonia`.`TBL_EMPLEADOS` (`ID_EMPLEADO` ASC);

CREATE INDEX `fk_TBL_EMPLEADOS_TBL_ESTATUS_EMPLEADO1_idx` ON `db-telefonia`.`TBL_EMPLEADOS` (`ID_ESTATUS_EMPLEADO` ASC);

CREATE INDEX `fk_TBL_EMPLEADOS_TBL_TITULACIONES1_idx` ON `db-telefonia`.`TBL_EMPLEADOS` (`ID_TITULACION` ASC);

CREATE INDEX `fk_TBL_EMPLEADOS_TBL_CARGO_EMPLEADO1_idx` ON `db-telefonia`.`TBL_EMPLEADOS` (`ID_CARGO_EMPLEADO` ASC);


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_CLIENTES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_CLIENTES` (
  `ID_CLIENTE` INT NOT NULL,
  `CORREO_ELECTRONICO` VARCHAR(80) NULL,
  PRIMARY KEY (`ID_CLIENTE`),
  CONSTRAINT `fk_TBL_CLIENTE_TBL_PERSONAS1`
    FOREIGN KEY (`ID_CLIENTE`)
    REFERENCES `db-telefonia`.`TBL_PERSONAS` (`ID_PERSONA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_TBL_CLIENTE_TBL_PERSONAS1_idx` ON `db-telefonia`.`TBL_CLIENTES` (`ID_CLIENTE` ASC);


-- -----------------------------------------------------
-- Table `db-telefonia`.`DETALLE_COMPRAS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`DETALLE_COMPRAS` (
  `UNIDADES` DOUBLE NOT NULL,
  `TOTAL_COMPRA` DOUBLE NULL,
  `COSTO_X_UNIDAD` DOUBLE NULL,
  PRIMARY KEY (`UNIDADES`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_TIPO_PROVEEDOR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_TIPO_PROVEEDOR` (
  `ID_TIPO_PROVEEDOR` INT NOT NULL,
  `TIPO_PROVEEDOR` VARCHAR(45) NULL,
  `DESCRIPCION` VARCHAR(250) NULL,
  PRIMARY KEY (`ID_TIPO_PROVEEDOR`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_PROVEEDOR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_PROVEEDOR` (
  `ID_PROVEEDOR` INT NOT NULL,
  `ID_TIPO_PROVEEDOR` INT NOT NULL,
  `NOMBRE_PROVEEDOR` VARCHAR(45) NULL,
  `DIRECCION` VARCHAR(50) NULL,
  PRIMARY KEY (`ID_PROVEEDOR`),
  CONSTRAINT `fk_TBL_PROVEEDOR_TBL_TIPO_PROVEEDOR1`
    FOREIGN KEY (`ID_TIPO_PROVEEDOR`)
    REFERENCES `db-telefonia`.`TBL_TIPO_PROVEEDOR` (`ID_TIPO_PROVEEDOR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_TBL_PROVEEDOR_TBL_TIPO_PROVEEDOR1_idx` ON `db-telefonia`.`TBL_PROVEEDOR` (`ID_TIPO_PROVEEDOR` ASC);


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_PRODUCTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_PRODUCTO` (
  `ID_PRODUCTO` INT NOT NULL,
  `TIPO_PRODUCTO` VARCHAR(45) NULL,
  `PRECIO_COMPRA` DOUBLE NULL,
  `PRECIO_VENTA` DOUBLE NULL,
  `FECHA_INGRESO` DATE NULL,
  `CATEGORIA` VARCHAR(45) NULL,
  `DETALLE_COMPRAS_UNIDADES` DOUBLE NOT NULL,
  `ID_PROVEEDOR` INT NOT NULL,
  PRIMARY KEY (`ID_PRODUCTO`),
  CONSTRAINT `fk_TBL_PRODUCTO_DETALLE_COMPRAS1`
    FOREIGN KEY (`DETALLE_COMPRAS_UNIDADES`)
    REFERENCES `db-telefonia`.`DETALLE_COMPRAS` (`UNIDADES`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_PRODUCTO_TBL_PROVEEDOR1`
    FOREIGN KEY (`ID_PROVEEDOR`)
    REFERENCES `db-telefonia`.`TBL_PROVEEDOR` (`ID_PROVEEDOR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_TBL_PRODUCTO_DETALLE_COMPRAS1_idx` ON `db-telefonia`.`TBL_PRODUCTO` (`DETALLE_COMPRAS_UNIDADES` ASC);

CREATE INDEX `fk_TBL_PRODUCTO_TBL_PROVEEDOR1_idx` ON `db-telefonia`.`TBL_PRODUCTO` (`ID_PROVEEDOR` ASC);


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_MARCAS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_MARCAS` (
  `ID_MARCA` INT NOT NULL,
  `DESCRIPCION` VARCHAR(30) NULL,
  `ID_PRODUCTO` INT NOT NULL,
  PRIMARY KEY (`ID_MARCA`),
  CONSTRAINT `fk_TBL_MARCA_TBL_PRODUCTO1`
    FOREIGN KEY (`ID_PRODUCTO`)
    REFERENCES `db-telefonia`.`TBL_PRODUCTO` (`ID_PRODUCTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_TBL_MARCA_TBL_PRODUCTO1_idx` ON `db-telefonia`.`TBL_MARCAS` (`ID_PRODUCTO` ASC);


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_GARANTIAS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_GARANTIAS` (
  `ID_GARANTIA` INT NOT NULL,
  `GARANTIA_ARTICULO` VARCHAR(100) NOT NULL,
  `DIAS_GARANTIA` INT NULL,
  PRIMARY KEY (`ID_GARANTIA`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_EXPEDIENTE_REPARACION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_EXPEDIENTE_REPARACION` (
  `ID_EXPEDIENTE_REPARACION` INT NOT NULL,
  `ID_SUCURSAL` INT NOT NULL,
  `ID_EMPLEADO` INT NOT NULL,
  `ID_PRODUCTO` INT NOT NULL,
  `ID_GARANTIA` INT NOT NULL,
  `FECHA_INGRESO` DATE NOT NULL,
  `FECHA_ENTREGA` DATE NOT NULL,
  `DIAGNOSTICO` VARCHAR(255) NOT NULL,
  `ID_CLIENTE` INT NOT NULL,
  `COSTO` DOUBLE NULL,
  PRIMARY KEY (`ID_EXPEDIENTE_REPARACION`),
  CONSTRAINT `fk_TBL_EXPEDIENTE_REPARACION_TBL_SUCURSALES1`
    FOREIGN KEY (`ID_SUCURSAL`)
    REFERENCES `db-telefonia`.`TBL_SUCURSALES` (`ID_SUCURSAL`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_EXPEDIENTE_REPARACION_TBL_PRODUCTO1`
    FOREIGN KEY (`ID_PRODUCTO`)
    REFERENCES `db-telefonia`.`TBL_PRODUCTO` (`ID_PRODUCTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_EXPEDIENTE_REPARACION_TBL_EMPLEADOS1`
    FOREIGN KEY (`ID_EMPLEADO`)
    REFERENCES `db-telefonia`.`TBL_EMPLEADOS` (`ID_EMPLEADO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_EXPEDIENTE_REPARACION_TBL_GARANTIAS1`
    FOREIGN KEY (`ID_GARANTIA`)
    REFERENCES `db-telefonia`.`TBL_GARANTIAS` (`ID_GARANTIA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_TBL_EXPEDIENTE_REPARACION_TBL_SUCURSALES1_idx` ON `db-telefonia`.`TBL_EXPEDIENTE_REPARACION` (`ID_SUCURSAL` ASC);

CREATE INDEX `fk_TBL_EXPEDIENTE_REPARACION_TBL_PRODUCTO1_idx` ON `db-telefonia`.`TBL_EXPEDIENTE_REPARACION` (`ID_PRODUCTO` ASC);

CREATE INDEX `fk_TBL_EXPEDIENTE_REPARACION_TBL_EMPLEADOS1_idx` ON `db-telefonia`.`TBL_EXPEDIENTE_REPARACION` (`ID_EMPLEADO` ASC);

CREATE INDEX `fk_TBL_EXPEDIENTE_REPARACION_TBL_GARANTIAS1_idx` ON `db-telefonia`.`TBL_EXPEDIENTE_REPARACION` (`ID_GARANTIA` ASC);


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_COMPRAS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_COMPRAS` (
  `ID_COMPRAS` INT NOT NULL,
  `DETALLE_COMPRAS_UNIDADES` DOUBLE NOT NULL,
  `FECHA_COMPRA` DATE NULL,
  `DESCRIPCION` VARCHAR(30) NULL,
  `TOTAL` DOUBLE NULL,
  PRIMARY KEY (`ID_COMPRAS`),
  CONSTRAINT `fk_TBL_COMPRAS_DETALLE_COMPRAS1`
    FOREIGN KEY (`DETALLE_COMPRAS_UNIDADES`)
    REFERENCES `db-telefonia`.`DETALLE_COMPRAS` (`UNIDADES`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_TBL_COMPRAS_DETALLE_COMPRAS1_idx` ON `db-telefonia`.`TBL_COMPRAS` (`DETALLE_COMPRAS_UNIDADES` ASC);


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_MODOS_DE_PAGO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_MODOS_DE_PAGO` (
  `ID_MODOS_DE_PAGO` INT NOT NULL,
  `TIPO_PAGO` VARCHAR(45) NULL,
  `DECRIPCION` VARCHAR(45) NULL,
  PRIMARY KEY (`ID_MODOS_DE_PAGO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_DESCUENTOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_DESCUENTOS` (
  `ID_DESCUENTOS` INT NOT NULL,
  `TIPO_DESCUENTO` DOUBLE NULL,
  `DECRIPCION` VARCHAR(45) NULL,
  PRIMARY KEY (`ID_DESCUENTOS`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_FACTURAS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_FACTURAS` (
  `ID_FACTURA` INT NOT NULL,
  `ID_DESCUENTOS` INT NOT NULL,
  `ID_MODOS_DE_PAGO` INT NOT NULL,
  `FECHA_FACTURA` DATE NULL,
  `IMPUESTO` DOUBLE NULL,
  `TOTAL_NETP` VARCHAR(45) NULL,
  PRIMARY KEY (`ID_FACTURA`),
  CONSTRAINT `fk_TBL_FACTURAS_TBL_MODOS_DE_PAGO1`
    FOREIGN KEY (`ID_MODOS_DE_PAGO`)
    REFERENCES `db-telefonia`.`TBL_MODOS_DE_PAGO` (`ID_MODOS_DE_PAGO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_FACTURAS_TBL_DESCUENTOS1`
    FOREIGN KEY (`ID_DESCUENTOS`)
    REFERENCES `db-telefonia`.`TBL_DESCUENTOS` (`ID_DESCUENTOS`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_TBL_FACTURAS_TBL_MODOS_DE_PAGO1_idx` ON `db-telefonia`.`TBL_FACTURAS` (`ID_MODOS_DE_PAGO` ASC);

CREATE INDEX `fk_TBL_FACTURAS_TBL_DESCUENTOS1_idx` ON `db-telefonia`.`TBL_FACTURAS` (`ID_DESCUENTOS` ASC);


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_DETALLES_FACTURA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_DETALLES_FACTURA` (
  `CANTIDAD` INT NULL,
  `PRECIO` DOUBLE NULL,
  `ID_PRODUCTO` INT NOT NULL,
  `ID_FACTURAS` INT NOT NULL,
  PRIMARY KEY (`ID_FACTURAS`, `ID_PRODUCTO`),
  CONSTRAINT `fk_TBL_DETALLES_FACTURA_TBL_PRODUCTO1`
    FOREIGN KEY (`ID_PRODUCTO`)
    REFERENCES `db-telefonia`.`TBL_PRODUCTO` (`ID_PRODUCTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_DETALLES_FACTURA_TBL_FACTURAS1`
    FOREIGN KEY (`ID_FACTURAS`)
    REFERENCES `db-telefonia`.`TBL_FACTURAS` (`ID_FACTURA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_TBL_DETALLES_FACTURA_TBL_PRODUCTO1_idx` ON `db-telefonia`.`TBL_DETALLES_FACTURA` (`ID_PRODUCTO` ASC);

CREATE INDEX `fk_TBL_DETALLES_FACTURA_TBL_FACTURAS1_idx` ON `db-telefonia`.`TBL_DETALLES_FACTURA` (`ID_FACTURAS` ASC);


-- -----------------------------------------------------
-- Table `db-telefonia`.`COMPRA_REPUESTOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`COMPRA_REPUESTOS` (
  `ID_COMPRA_REPUESTOS` INT NOT NULL,
  `FECHA_PEDIDO` DATE NULL,
  `PAIS_PIEZA` VARCHAR(45) NULL,
  `FECHA_LLEGADA` DATE NULL,
  `PRECIO_LEMPIRAS` DOUBLE NULL,
  `PRECIO_DOLARES` DOUBLE NULL,
  `TBL_EXPEDIENTE_REPARACION_idTBL_EXPEDIENTE_REPARACION` INT NOT NULL,
  `TBL_FACTURAS_idTBL_FACTURAS` INT NOT NULL,
  PRIMARY KEY (`ID_COMPRA_REPUESTOS`, `TBL_FACTURAS_idTBL_FACTURAS`),
  CONSTRAINT `fk_COMPRA_REPUESTOS_TBL_EXPEDIENTE_REPARACION1`
    FOREIGN KEY (`TBL_EXPEDIENTE_REPARACION_idTBL_EXPEDIENTE_REPARACION`)
    REFERENCES `db-telefonia`.`TBL_EXPEDIENTE_REPARACION` (`ID_EXPEDIENTE_REPARACION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_COMPRA_REPUESTOS_TBL_FACTURAS1`
    FOREIGN KEY (`TBL_FACTURAS_idTBL_FACTURAS`)
    REFERENCES `db-telefonia`.`TBL_FACTURAS` (`ID_FACTURA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_COMPRA_REPUESTOS_TBL_EXPEDIENTE_REPARACION1_idx` ON `db-telefonia`.`COMPRA_REPUESTOS` (`TBL_EXPEDIENTE_REPARACION_idTBL_EXPEDIENTE_REPARACION` ASC);

CREATE INDEX `fk_COMPRA_REPUESTOS_TBL_FACTURAS1_idx` ON `db-telefonia`.`COMPRA_REPUESTOS` (`TBL_FACTURAS_idTBL_FACTURAS` ASC);


-- -----------------------------------------------------
-- Table `db-telefonia`.`BITACORA_VENTAS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`BITACORA_VENTAS` (
  `ID_BITACORA_VENTAS` INT NOT NULL,
  `ID_FACTURA` INT NOT NULL,
  `FECHA_BITACORA` DATE NULL,
  `HORA_BITACORA` VARCHAR(45) NULL,
  `TBL_CLIENTE_idTBL_CLIENTE` INT NOT NULL,
  PRIMARY KEY (`ID_BITACORA_VENTAS`),
  CONSTRAINT `fk_BITACORA_VENTAS_TBL_FACTURAS1`
    FOREIGN KEY (`ID_FACTURA`)
    REFERENCES `db-telefonia`.`TBL_FACTURAS` (`ID_FACTURA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_BITACORA_VENTAS_TBL_FACTURAS1_idx` ON `db-telefonia`.`BITACORA_VENTAS` (`ID_FACTURA` ASC);


-- -----------------------------------------------------
-- Table `db-telefonia`.`timestamps`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`timestamps` (
  `create_time` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `update_time` TIMESTAMP NULL);


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_TIPO_NOTIFICACION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_TIPO_NOTIFICACION` (
  `ID_TIPO_NOTIFICACION` INT NOT NULL AUTO_INCREMENT,
  `TIPO_NOTIFICACION` VARCHAR(45) NOT NULL,
  `DESCRIPCION_TIPO_NOTIF` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`ID_TIPO_NOTIFICACION`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_NOTIFICACIONES_EMPLEADOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_NOTIFICACIONES_EMPLEADOS` (
  `ID_NOTIF_EMPLEADO` INT NOT NULL AUTO_INCREMENT,
  `ID_EMPLEADO` INT NOT NULL,
  `ID_TIPO_NOTIFICACION` INT NOT NULL,
  `DESCRIPCION_NOTIFICACION` VARCHAR(200) NULL,
  `FECHA_NOTIFICACION` DATE NULL,
  PRIMARY KEY (`ID_NOTIF_EMPLEADO`),
  CONSTRAINT `fk_TBL_NOTIFICACIONES_EMPLEADOS_TBL_EMPLEADOS1`
    FOREIGN KEY (`ID_EMPLEADO`)
    REFERENCES `db-telefonia`.`TBL_EMPLEADOS` (`ID_EMPLEADO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_NOTIFICACIONES_EMPLEADOS_TBL_TIPO_NOTIFICACION1`
    FOREIGN KEY (`ID_TIPO_NOTIFICACION`)
    REFERENCES `db-telefonia`.`TBL_TIPO_NOTIFICACION` (`ID_TIPO_NOTIFICACION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_TBL_NOTIFICACIONES_EMPLEADOS_TBL_EMPLEADOS1_idx` ON `db-telefonia`.`TBL_NOTIFICACIONES_EMPLEADOS` (`ID_EMPLEADO` ASC);

CREATE INDEX `fk_TBL_NOTIFICACIONES_EMPLEADOS_TBL_TIPO_NOTIFICACION1_idx` ON `db-telefonia`.`TBL_NOTIFICACIONES_EMPLEADOS` (`ID_TIPO_NOTIFICACION` ASC);


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_NOTIFICACIONES_CLIENTES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_NOTIFICACIONES_CLIENTES` (
  `ID_NOTIF_CLIENTE` INT NOT NULL,
  `ID_CLIENTE` INT NOT NULL,
  `ID_TIPO_NOTIFICACION` INT NOT NULL,
  `DESCRIPCION_NOTIFICACION` VARCHAR(200) NULL,
  `FECHA_NOTIFICACION_CLI` DATE NULL,
  PRIMARY KEY (`ID_NOTIF_CLIENTE`),
  CONSTRAINT `fk_TBL_NOTIFICACIONES_CLIENTES_TBL_CLIENTE1`
    FOREIGN KEY (`ID_CLIENTE`)
    REFERENCES `db-telefonia`.`TBL_CLIENTES` (`ID_CLIENTE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_NOTIFICACIONES_CLIENTES_TBL_TIPO_NOTIFICACION1`
    FOREIGN KEY (`ID_TIPO_NOTIFICACION`)
    REFERENCES `db-telefonia`.`TBL_TIPO_NOTIFICACION` (`ID_TIPO_NOTIFICACION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_TBL_NOTIFICACIONES_CLIENTES_TBL_CLIENTE1_idx` ON `db-telefonia`.`TBL_NOTIFICACIONES_CLIENTES` (`ID_CLIENTE` ASC);

CREATE INDEX `fk_TBL_NOTIFICACIONES_CLIENTES_TBL_TIPO_NOTIFICACION1_idx` ON `db-telefonia`.`TBL_NOTIFICACIONES_CLIENTES` (`ID_TIPO_NOTIFICACION` ASC);


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_TIPO_BITACORA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_TIPO_BITACORA` (
  `ID_TIPO_BITACORA` INT NOT NULL AUTO_INCREMENT,
  `BITACORA` VARCHAR(40) NOT NULL,
  `DESCRIPCION` VARCHAR(150) NULL,
  PRIMARY KEY (`ID_TIPO_BITACORA`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db-telefonia`.`TBL_BITACORAS_EMPLEADOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db-telefonia`.`TBL_BITACORAS_EMPLEADOS` (
  `ID_BITACORA` INT NOT NULL AUTO_INCREMENT,
  `ID_EMPLEADO` INT NOT NULL,
  `ID_TIPO_BITACORA` INT NOT NULL,
  `FECHA_HORA_BITACORA` DATETIME NOT NULL,
  PRIMARY KEY (`ID_BITACORA`),
  CONSTRAINT `fk_TBL_BITACORAS_EMPLEADOS_TBL_TIPO_BITACORA1`
    FOREIGN KEY (`ID_TIPO_BITACORA`)
    REFERENCES `db-telefonia`.`TBL_TIPO_BITACORA` (`ID_TIPO_BITACORA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TBL_BITACORAS_EMPLEADOS_TBL_EMPLEADOS1`
    FOREIGN KEY (`ID_EMPLEADO`)
    REFERENCES `db-telefonia`.`TBL_EMPLEADOS` (`ID_EMPLEADO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_TBL_BITACORAS_EMPLEADOS_TBL_TIPO_BITACORA1_idx` ON `db_telefonia`.`tbl_bitacoras_empleados` (`ID_TIPO_BITACORA` ASC);

CREATE INDEX `fk_TBL_BITACORAS_EMPLEADOS_TBL_EMPLEADOS1_idx` ON `db_telefonia`.`tbl_bitacoras_empleados` (`ID_EMPLEADO` ASC);

ALTER TABLE tbl_proveedor MODIFY COLUMN DIRECCION VARCHAR(255);

ALTER TABLE `tbl_proveedor` CHANGE `ID_PROVEEDOR` `ID_PROVEEDOR` INT(11) NOT NULL AUTO_INCREMENT;
ALTER TABLE tbl_proveedor ADD COLUMN CORREO VARCHAR(60); 
ALTER TABLE tbl_proveedor ADD COLUMN TELEFONO VARCHAR(25);
